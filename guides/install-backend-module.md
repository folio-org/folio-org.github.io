---
layout: page
title: Install a new back-end module to reference environments
permalink: /guides/install-backend-module/
menuInclude: no
menuTopTitle: Guides
---

## Introduction

When the initial development of a new back-end (server-side) module is [established](/guidelines/create-new-repo/), and snapshot artifacts are being generated by the continuous integration, then it is able to be added to the folio-snapshot and folio-testing [reference environments](/guides/automation/#reference-environments).

There is a separate procedure to [install a new front-end module](/guides/install-frontend-module/).

(After the new module has been operating in snapshot and testing environments, and an initial release is ready to be made, then instead follow the [release procedures](/guidelines/release-procedures/#add-to-platforms).)

## Avoid typical mistakes

Before proceeding, ensure that the backend module does not make some of the typical mistakes that cause disruption.

Note that this is not an exhaustive list.

* The port numbers are matching -- the same in ModuleDescriptor, Dockerfile, and in program code and configuration.
* The module version number (e.g. in Maven POM) is a semantic version number and snapshot designator, i.e. in mainline branch it should be `x.y.z-SNAPSHOT`. Avoid common mistakes like `x.y-SNAPSHOT` or `x.y.z` with no appended `-SNAPSHOT`.
* Other ...

## Verify MD and required interfaces

Ensure that this new module's [ModuleDescriptor](/guides/module-descriptor/) is deployed and that any required interfaces are available.

For example, consider the `mod-notes` module.
Obtain its MD from the registry and extract the "requires" section:

```
curl -s -S -w'\n' \
  'http://folio-registry.aws.indexdata.com/_/proxy/modules?filter=mod-notes&latest=1&full=true' \
  | jq '.[].requires'
```

That shows that it requires various interfaces, including "`users 15.1`" and "`configuration 2.0`".

Now ensure that each needed interface version is available.
One method is to visit the [https://folio-snapshot.dev.folio.org/settings/about](https://folio-snapshot.dev.folio.org/settings/about) page.

## Ensure LaunchDescriptor

Ensure that this new module's [ModuleDescriptor](/guides/module-descriptor/) includes the Docker-based [LaunchDescriptor](/guides/module-descriptor/#launchdescriptor-properties).

Its properties will specify the memory allocation, whether this module utilises a database, and can document other environment variables, etc.

## Ensure local Docker

Ensure that the module will operate with a local Vagrant VM.

Follow the guide to verify [Local module as Docker container](/guides/run-local-folio/#local-module-as-docker-container).

## Declare new module

### Configure platforms

The normal process is that a UI module will require interfaces that are provided by back-end modules (declared in the "okapiInterfaces" section of their package.json file).
With this, the relevant back-end modules are automatically included.

However sometimes the front-end and back-end are not yet ready for each other.

Temporarily add the new back-end module to the `install-extras.json` file of the "snapshot" branch of the relevant platform.
(Note that "core" modules are added to both platform-core and platform-complete.)

After the back-end development is eventually ready, then a front-end module will require this module.
When that happens, then the backend module will be automatically included via the normal process, so it can then be removed from this `install-extras.json` file.

However some back-end modules are never required by front-end modules.
In these cases they are always configured in that file.

After merge to the "snapshot" branch of the platform, then await the scheduled build of the [folio-snapshot reference environment](/guides/automation/#folio-snapshot) (and as noted there, the dependent platform build to succeed).

### Configure folio-ansible

At this stage of the project there are separate procedures for adding a new back-end module to the folio-testing reference environment, and for the Vagrant VM boxes for snapshot and testing.

Prepare the Jira ticket to guide the process, and request that the new backend module be enabled for the snapshot and testing.
Also clarify if this module needs to be included in the "core" set of modules.

Specify "Development Team: FOLIO DevOps" to be prioritized and scheduled.

The DevOps team will configure the module and conduct various configuration tests.

## Verify deployment

After merge, await the scheduled build of the folio-snapshot and folio-testing [reference environments](/guides/automation/#reference-environments).

Visit the [Software versions](https://folio-snapshot.dev.folio.org/settings/about) page of each to verify that the new module is present.

<div class="folio-spacer-content"></div>

